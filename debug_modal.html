<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Debug do Modal de Cronograma</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            padding: 20px;
            background: #f5f5f5;
        }
        .debug-container {
            max-width: 1000px;
            margin: 0 auto;
            background: white;
            padding: 30px;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        .debug-section {
            margin: 20px 0;
            padding: 15px;
            border: 1px solid #ddd;
            border-radius: 6px;
            background: #fafafa;
        }
        .debug-section h3 {
            margin: 0 0 15px 0;
            color: #333;
        }
        .code-block {
            background: #f4f4f4;
            border: 1px solid #ddd;
            border-radius: 4px;
            padding: 15px;
            font-family: 'Courier New', monospace;
            font-size: 13px;
            overflow-x: auto;
            margin: 10px 0;
        }
        .highlight {
            background: #ffeb3b;
            padding: 2px 4px;
            border-radius: 2px;
        }
        .error {
            color: #f44336;
            font-weight: bold;
        }
        .success {
            color: #4caf50;
            font-weight: bold;
        }
        .warning {
            color: #ff9800;
            font-weight: bold;
        }
        .test-data {
            background: #e3f2fd;
            border: 1px solid #2196f3;
            border-radius: 4px;
            padding: 15px;
            margin: 10px 0;
        }
    </style>
</head>
<body>
    <div class="debug-container">
        <h1>üîç Debug do Modal de Cronograma - Problema do Gr√°fico</h1>
        
        <div class="debug-section">
            <h3>üö® Problema Identificado</h3>
            <p>O gr√°fico <strong class="error">N√ÉO</strong> aparece porque a condi√ß√£o est√° muito restritiva!</p>
            
            <div class="code-block">
// C√ìDIGO ATUAL (LINHA 1742)
const timelineChartHtml = cap.capitalizationBreakdown && cap.capitalizationBreakdown.length > 1 ? `
  &lt;div class="timeline-chart"&gt;...&lt;/div&gt;
` : ''
            </div>
            
            <p class="warning">‚ö†Ô∏è O gr√°fico s√≥ aparece se houver <strong>mais de 1</strong> capitaliza√ß√£o!</p>
            <p>Mesmo que haja 1 capitaliza√ß√£o, o gr√°fico n√£o ser√° exibido.</p>
        </div>

        <div class="debug-section">
            <h3>‚úÖ Solu√ß√£o Proposta</h3>
            <p>Mude a condi√ß√£o para mostrar o gr√°fico sempre que houver pelo menos 1 capitaliza√ß√£o:</p>
            
            <div class="code-block">
// C√ìDIGO CORRIGIDO
const timelineChartHtml = cap.capitalizationBreakdown && cap.capitalizationBreakdown.length >= 1 ? `
  &lt;div class="timeline-chart"&gt;...&lt;/div&gt;
` : ''
            </div>
            
            <p class="success">‚úÖ Assim o gr√°fico aparecer√° mesmo com apenas 1 capitaliza√ß√£o!</p>
        </div>

        <div class="debug-section">
            <h3>üìä Teste de Dados Simulados</h3>
            <p>Veja como ficaria com diferentes quantidades de capitaliza√ß√µes:</p>
            
            <div class="test-data">
                <h4>Teste 1: 1 capitaliza√ß√£o (atualmente N√ÉO mostra gr√°fico)</h4>
                <div class="code-block">
capitalizationBreakdown: [
  { ym: '2024-01', capitalized: 15000 }
]
// length = 1 ‚Üí condi√ß√£o &gt; 1 = FALSE ‚Üí ‚ùå N√£o mostra gr√°fico
                </div>
            </div>
            
            <div class="test-data">
                <h4>Teste 2: 2 capitaliza√ß√µes (atualmente mostra gr√°fico)</h4>
                <div class="code-block">
capitalizationBreakdown: [
  { ym: '2024-01', capitalized: 15000 },
  { ym: '2024-02', capitalized: 17550 }
]
// length = 2 ‚Üí condi√ß√£o &gt; 1 = TRUE ‚Üí ‚úÖ Mostra gr√°fico
                </div>
            </div>
        </div>

        <div class="debug-section">
            <h3>üîß Outros Poss√≠veis Problemas</h3>
            <ul>
                <li><strong>capitalizationBreakdown undefined:</strong> Verifique se a fun√ß√£o <code>computeCapitalizationForDebt</code> est√° retornando o array corretamente</li>
                <li><strong>Altura das barras:</strong> A escala pode estar muito pequena: <code>Math.min(60, (item.capitalized / 1000) * 2)</code></li>
                <li><strong>CSS n√£o aplicado:</strong> Verifique se os estilos inline est√£o sendo aplicados corretamente</li>
            </ul>
        </div>

        <div class="debug-section">
            <h3>üéØ Corre√ß√£o Completa</h3>
            <p>Substitua a linha 1742 no arquivo <code>js/dashboard.js</code>:</p>
            
            <div class="code-block">
// ANTES (LINHA 1742)
const timelineChartHtml = cap.capitalizationBreakdown && cap.capitalizationBreakdown.length > 1 ? `

// DEPOIS
const timelineChartHtml = cap.capitalizationBreakdown && cap.capitalizationBreakdown.length >= 1 ? `
            </div>
            
            <p class="success">‚úÖ Com esta mudan√ßa, o gr√°fico aparecer√° sempre que houver pelo menos 1 capitaliza√ß√£o!</p>
        </div>
    </div>
</body>
</html>